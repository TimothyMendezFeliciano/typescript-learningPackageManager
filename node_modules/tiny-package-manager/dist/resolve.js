"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const node_fetch_1 = require("node-fetch");
// This allows us use a custom npm registry.
const REGISTRY = process.env.REGISTRY || 'https://registry.npmjs.org/';
// Use cache to prevent duplicated network request,
// when asking the same package.
const cache = Object.create(null);
async function default_1(name) {
    // If the requested package manifest is existed in cache,
    // just return it directly.
    if (cache[name]) {
        return cache[name];
    }
    const response = await node_fetch_1.default(`${REGISTRY}${name}`);
    const json = await response.json();
    if (json.error) {
        throw new ReferenceError(`No such package: ${name}`);
    }
    // Add the manifest info to cache and return it.
    return cache[name] = json.versions;
}
exports.default = default_1;
